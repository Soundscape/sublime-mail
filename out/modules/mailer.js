(function(){var t,e,n,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;n=require("mandrill-api"),t=require("sublime-core"),e=function(t){function e(t){e.__super__.constructor.call(this),this.clientId=t,this.api=new n.Mandrill(this.clientId)}return r(e,t),e.prototype.send=function(t,e,n,r,i,o){return this.api.messages.send({message:{html:r,subject:n,from_email:e,to:[{email:t}],important:i||!1,attachments:o||[]}},function(t){return function(e){return t.emit("sent",e)}}(this),function(t){return function(e){return t.emit("sent",{error:e})}}(this))},e.prototype.sendTemplate=function(t,e,n,r,i,o,s){return this.api.messages.sendTemplate({template_name:t,template_content:s||[],message:{subject:r,from_email:n,to:[{email:e}],important:i||!1,attachments:o||[],inline_css:!0}},function(t){return function(e){return t.emit("sent",e)}}(this),function(t){return function(e){return t.emit("sent",{error:e})}}(this))},e}(t.CoreObject),module.exports=e}).call(this);
